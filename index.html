<!DOCTYPE html>
<html>

<head>
    <title>Detect Entities</title>
</head>

<body>
    <h1>Detect Entities</h1>
    <b>Enter the text:</b><br>
    <textarea id="inputText" rows="4" cols="50" placeholder="Enter text"></textarea><br><br>

    <button onclick="detectEntities()">Detect Entities</button><br><br>

    <b>Output:</b><br>
    <!-- <textarea id="outputText" rows="4" cols="50" readonly></textarea><br><br> -->
    <div id="outputText" style="white-space: pre-line;"></div><br><br>

    <script>

        function detectEntities() {
            //hacemos un fetch del documento system_entities.json y guardamos numero y colores
            fetch('entities.json')
                .then(response => response.json())
                .then(data => {
                    const countries = data.system.countries;
                    const colores = data.system.colores;
                    const continents = data.custom.continents;
                    const airports = data.system.airports;
                    const inputTextArea = document.getElementById("inputText");
                    const outputDiv = document.getElementById("outputText");

                    const inputText = inputTextArea.value;

                    if (inputText.trim() === '') {
                        alert("Please enter some text.");
                        return;
                    }

                    //dividimos el texto en palabras
                    const words = inputText.split(/\s+/);

                    //función para determinar si una palabra está en la lista de países
                    const isCountry = (word) => countries.includes(word);
                    //función para determinar si una palabra está en la lista de colores
                    const isColor = (word) => colores.includes(word);
                    //función para determinar si una palabra está en la lista de colores
                    const isContinent = (word) => continents.includes(word);
                    //función para determinar si una palabra está en la lista de aeropuertos
                    const isAirport = (word) => airports.includes(word);

                    //Definimos estilos para custom y no custom
                    const customStyle = "color: red;";
                    const noCustomStyle = "color: green;";

                    //añadir las etiquetas a las palabras
                    const outputText = words.map((word) => {
                        if (!isNaN(parseFloat(word))) {
                            //return word + "($number)";
                            return `<span style="${noCustomStyle}">${word}($number)</span>`;
                        } else if (isCountry(word)) {
                            //return word + "($country)";
                            return `<span style="${noCustomStyle}">${word}($country)</span>`;
                        } else if (isColor(word)) {
                            //return word + "($color)";
                            return `<span style="${noCustomStyle}">${word}($color)</span>`;
                        } else if (isContinent(word)) {
                            //return word + "($continent)";
                            return `<span style="${customStyle}">${word}($continent)</span>`;
                        } else if (isAirport(word)) {
                            //return word + "($airport)";
                            return `<span style="${noCustomStyle}">${word}($airport)</span>`;
                        } else {
                            return word;
                        }
                    }).join(" ");

                    //outputTextArea.value = outputText;
                    outputDiv.innerHTML = outputText;
                });
        }
    </script>
</body>

</html>