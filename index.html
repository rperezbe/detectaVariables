<!DOCTYPE html>
<html>

<head>
    <title>Detect Entities</title>
</head>

<body>
    <h1>Detect Entities</h1>
    <b>Enter the text:</b><br>
    <textarea id="inputText" rows="4" cols="50" placeholder="Enter text"></textarea><br><br>

    <button onclick="detectEntities()">Detect Entities</button><br><br>

    <b>Output:</b><br>
    <textarea id="outputText" rows="4" cols="50" readonly></textarea><br><br>

    <script>

        function detectEntities() {
            //hacemos un fetch del documento system_entities.json y guardamos numero y colores
            fetch('entities.json')
                .then(response => response.json())
                .then(data => {
                    const countries = data.system.countries;
                    const colores = data.system.colores;
                    const continents = data.custom.continents;
                    const inputTextArea = document.getElementById("inputText");
                    const outputTextArea = document.getElementById("outputText");

                    const inputText = inputTextArea.value;

                    if (inputText.trim() === '') {
                        alert("Please enter some text.");
                        return;
                    }

                    //dividimos el texto en palabras
                    const words = inputText.split(/\s+/);

                    //función para determinar si una palabra está en la lista de países
                    const isCountry = (word) => countries.includes(word);
                    //función para determinar si una palabra está en la lista de colores
                    const isColor = (word) => colores.includes(word);
                    //función para determinar si una palabra está en la lista de colores
                    const isContinent = (word) => continents.includes(word);

                    //añadir las etiquetas a las palabras
                    const outputText = words.map((word) => {
                        if (!isNaN(parseFloat(word))) {
                            return word + "($number)";
                        } else if (isCountry(word)) {
                            return word + "($country)";
                        } else if (isColor(word)) {
                            return word + "($color)";
                        }else if (isContinent(word)) {
                            return word + "($continent)";
                        } else {
                            return word;
                        }
                    }).join(" ");

                    outputTextArea.value = outputText;
                });
        }
    </script>
</body>

</html>